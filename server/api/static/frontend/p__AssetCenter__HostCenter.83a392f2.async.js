"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[391],{21383:function(W,M,e){e.r(M);var j=e(97857),s=e.n(j),b=e(5574),a=e.n(b),C=e(12121),i=e(38345),d=e(56346),y=e(48555),h=e(83186),T=e(63922),v=e(49748),m=e(67294),g=e(30381),B=e.n(g),P=e(80854),_=e(85893),D=[{title:"\u4E3B\u673A\u540D\u79F0",dataIndex:"hostname",copyable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u5E73\u53F0",dataIndex:"platform",ellipsis:!0,search:!1,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},renderText:function(l){return l===null?"invalid":l.indexOf("Windows")!=-1?"Windows":l.replace(/^\S/,function(p){return p.toUpperCase()})}},{disable:!0,title:"\u72B6\u6001",dataIndex:"status",ellipsis:!0,width:"10%",valueEnum:{true:{text:"\u5728\u7EBF",status:"Success"},false:{text:"\u79BB\u7EBF",status:"Error"}}},{title:"\u5730\u5740",dataIndex:"addr",copyable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"showTime",dataIndex:"create_at",sorter:!0,search:!1,hideInSearch:!0,renderText:function(l){var p=new Date(l*1e3);return B()(p).utc(!0).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:"10%",render:function(l,p,f,r){return[(0,_.jsx)("a",{href:"host/"+p.agent_id,rel:"noopener noreferrer",children:"\u8BE6\u60C5"},"view")]}}],R=function(){var l=(0,m.useState)(!1),p=a()(l,2),f=p[0],r=p[1],n=(0,m.useState)(0),o=a()(n,2),u=o[0],t=o[1],L=(0,m.useState)(0),A=a()(L,2),x=A[0],U=A[1],K=(0,P.useRequest)(v.Ek),E=K.data;(0,m.useEffect)(function(){t((E==null?void 0:E.total)||0),U((E==null?void 0:E.online)||0)},[E]);var S=(0,m.useRef)();return(0,_.jsxs)(C._z,{children:[(0,_.jsx)("div",{children:(0,_.jsx)(y.Z,{onResize:function(c){r(c.width<596)},children:(0,_.jsxs)(i.Z.Group,{direction:f?"column":"row",children:[(0,_.jsx)(i.Z,{layout:"center",children:(0,_.jsx)(h.Z,{title:"\u5728\u7EBF\u4E3B\u673A",value:x,precision:0,prefix:(0,_.jsx)(T.Z,{color:"green"})})}),(0,_.jsx)(i.Z.Divider,{type:f?"horizontal":"vertical"}),(0,_.jsx)(i.Z,{layout:"center",children:(0,_.jsx)(h.Z,{title:"\u79BB\u7EBF\u4E3B\u673A",value:u-x,precision:0,prefix:(0,_.jsx)(T.Z,{color:"gray"})})})]})},"resize-observer")}),(0,_.jsx)("p",{}),(0,_.jsx)(d.Z,{columns:D,actionRef:S,cardBordered:!0,request:v.Zs,editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",onChange:function(c){console.log("value: ",c)}},rowKey:"agent_id",search:{labelWidth:"auto"},options:!1,form:{syncToUrl:function(c,H){return H==="get"?s()(s()({},c),{},{created_at:[c.startTime,c.endTime]}):c}},pagination:{pageSize:10,onChange:function(c){return console.log(c)}},dateFormatter:"string",headerTitle:"\u4E3B\u673A\u5217\u8868"})]})};M.default=R},49748:function(W,M,e){e.d(M,{Ek:function(){return y},LH:function(){return O},Nh:function(){return p},UV:function(){return _},Zs:function(){return T},nc:function(){return B},pi:function(){return m},sk:function(){return R}});var j=e(15009),s=e.n(j),b=e(97857),a=e.n(b),C=e(99289),i=e.n(C),d=e(80854);function y(r){return h.apply(this,arguments)}function h(){return h=i()(s()().mark(function r(n){return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.request)("/api/v1/grpc/conn/count",a()({method:"GET"},n||{})));case 1:case"end":return u.stop()}},r)})),h.apply(this,arguments)}function T(r,n){return v.apply(this,arguments)}function v(){return v=i()(s()().mark(function r(n,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("/api/v1/grpc/conn/basic",a()({method:"GET",params:a()({},n)},o||{})));case 1:case"end":return t.stop()}},r)})),v.apply(this,arguments)}function m(r,n){return g.apply(this,arguments)}function g(){return g=i()(s()().mark(function r(n,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("/api/v1/grpc/conn/stat",a()({method:"GET",params:a()({},n)},o||{})));case 1:case"end":return t.stop()}},r)})),g.apply(this,arguments)}function B(r,n){return P.apply(this,arguments)}function P(){return P=i()(s()().mark(function r(n,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("/api/v1/plugin/send",a()({method:"POST",data:JSON.stringify({name:n.name,pversion:n.pversion,agent_id:n.agent_id,action:n.action}),headers:{"Content-Type":"application/json"}},o||{})));case 1:case"end":return t.stop()}},r)})),P.apply(this,arguments)}function _(r){return D.apply(this,arguments)}function D(){return D=i()(s()().mark(function r(n){return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.request)("/api/v1/plugin/list",a()({method:"GET"},n||{})));case 1:case"end":return u.stop()}},r)})),D.apply(this,arguments)}function R(r){return(0,d.request)("/api/v1/plugin/delete",a()({method:"GET"},r||{}))}function O(r,n){return l.apply(this,arguments)}function l(){return l=i()(s()().mark(function r(n,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)(n,a()({},o||{})));case 1:case"end":return t.stop()}},r)})),l.apply(this,arguments)}function p(r,n){return f.apply(this,arguments)}function f(){return f=i()(s()().mark(function r(n,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("/api/v1/asset/get",a()({method:"GET",params:n},o||{})));case 1:case"end":return t.stop()}},r)})),f.apply(this,arguments)}}}]);
